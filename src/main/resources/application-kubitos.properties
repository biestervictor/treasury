spring.application.name=treasury
#spring.mongodb.uri=mongodb://mongodb:27017/treasury
spring.mongodb.uri=mongodb://mongodb-service.treasury.svc.cluster.local:27017/treasury
spring.thymeleaf.cache=false

# Mail Notifications
# Aktiviert den MailService.
treasury.mail.enabled=true
# Empfänger für Startup/Scheduler Benachrichtigungen (wird z.B. vom SellJob verwendet)
treasury.mail.startup.to=victor.biester@icloud.com
# Absender/Reply-To
# Bei Mailjet muss "from" i.d.R. eine im Mailjet-Account verifizierte Absenderadresse/Domäne sein.
treasury.mail.from=${TREASURY_MAIL_FROM:audio-retsina.7d@icloud.com}
treasury.mail.replyTo=${TREASURY_MAIL_REPLY_TO:audio-retsina.7d@icloud.com}

# Mailjet SMTP (STARTTLS)
# Host: in der Mailjet-Doku i.d.R. in Form von in-v3.mailjet.com (Region abhängig)
spring.mail.host=${MAILJET_SMTP_HOST:in-v3.mailjet.com}
spring.mail.port=${MAILJET_SMTP_PORT:587}
# Username/Password sind bei Mailjet die SMTP-API Keys (nicht dein Mailbox-Passwort)
spring.mail.username=${MAILJET_API_KEY:}
spring.mail.password=${MAILJET_API_SECRET:}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.connectiontimeout=5000
spring.mail.properties.mail.smtp.timeout=5000
spring.mail.properties.mail.smtp.writetimeout=5000
# ------------------------------
# Scraper (Cardmarket) Controls
# ------------------------------
# Zufällige Pause vor Requests
treasury.scraper.jitter.enabled=true
treasury.scraper.jitter.minMs=750
treasury.scraper.jitter.maxMs=2500

# Globaler Mindestabstand zwischen Requests (über alle Threads/Jobs hinweg)
treasury.scraper.throttle.enabled=true
treasury.scraper.throttle.minIntervalMs=2000

# Per-URL Cache (reduziert Requests massiv)
treasury.scraper.cache.enabled=true
treasury.scraper.cache.ttlSeconds=900
treasury.scraper.cache.serveStaleOnError=true
treasury.scraper.cache.maxStaleSeconds=3600

# Backoff wenn Rate-Limit (Error 1015) erkannt wird
treasury.scraper.backoff.enabled=true
treasury.scraper.backoff.baseDelayMs=15000
treasury.scraper.backoff.maxDelayMs=300000
treasury.scraper.backoff.maxRateLimitHits=5

# Job Defaults (UI kann zur Laufzeit deaktivieren/aktivieren)
treasury.jobs.sellEnabled=true
treasury.jobs.priceScraperEnabled=true
treasury.jobs.magicSetEnabled=true
